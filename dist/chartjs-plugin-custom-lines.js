!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("lodash.merge")):"function"==typeof define&&define.amd?define(["lodash.merge"],o):t.chartjsPluginCustomLines=o(t._.merge)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;!function(){function t(t){this.value=t}function o(o){function e(n,s){try{var a=o[n](s),i=a.value;i instanceof t?Promise.resolve(i.value).then(function(t){e("next",t)},function(t){e("throw",t)}):r(a.done?"return":"normal",a.value)}catch(t){r("throw",t)}}function r(t,o){switch(t){case"return":n.resolve({value:o,done:!0});break;case"throw":n.reject(o);break;default:n.resolve({value:o,done:!1})}(n=n.next)?e(n.key,n.arg):s=null}var n,s;this._invoke=function(t,o){return new Promise(function(r,a){var i={key:t,arg:o,resolve:r,reject:a,next:null};s?s=s.next=i:(n=s=i,e(t,o))})},"function"!=typeof o.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(o.prototype[Symbol.asyncIterator]=function(){return this}),o.prototype.next=function(t){return this._invoke("next",t)},o.prototype.throw=function(t){return this._invoke("throw",t)},o.prototype.return=function(t){return this._invoke("return",t)}}();var o=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){switch(e){case"BR":return o({},t,{stackBLPos:t.stackBRPos});case"BL":return o({},t,{stackBRPos:t.stackBLPos});case"TR":return o({},t,{stackBRPos:t.stackTRPos});case"TL":return o({},t,{stackBRPos:t.stackTLPos});default:return t}}(function(t,e){switch(e){case"BR":return o({},t,{stackTRPos:t.stackBRPos});case"BL":return o({},t,{stackTLPos:t.stackBLPos});case"TR":return o({},t,{stackTLPos:t.stackTRPos});case"TL":return o({},t,{stackTRPos:t.stackTLPos});default:return t}}(t,e.top),e.bottom)},r=function(t){var r=t.ctx,n=o({},t.data.datasets),s=t.options.plugins.customLinesPlugin;if(!Object.prototype.hasOwnProperty.call(s,"lines"))throw new Error("The 'lines' property must be specified");var a=Object.keys(n).map(function(t){var o=function(t){var o=Object.keys(t._meta)[0];return t._meta[o].data[0]._model}(n[t]);return{stackBRPos:{x:o.x+o.width/2,y:o.base},stackBLPos:{x:o.x-o.width/2,y:o.base},stackTRPos:{x:o.x+o.width/2,y:o.y},stackTLPos:{x:o.x-o.width/2,y:o.y}}});s.lines.forEach(function(t){!function(t){if(!Object.prototype.hasOwnProperty.call(t,"from"))throw new Error("The 'from' property must be specified for each line");if(!Object.prototype.hasOwnProperty.call(t,"to"))throw new Error("The 'to' property must be specified for each line");if(!Object.prototype.hasOwnProperty.call(t.from,"stackIndex"))throw new Error("The 'stackIndex' property must be specified for the 'from' property");if(!Object.prototype.hasOwnProperty.call(t.to,"stackIndex"))throw new Error("The 'stackIndex' property must be specified for the 'to' property")}(t),function(t,o,r,n,s){var a=n.startColor||s.startColor,i=n.endColor||s.endColor,c=n.startColorStop||s.startColorStop,u=n.endColorStop||s.endColorStop,l=r.stackTLPos.y,p=r.stackBLPos.y;n.reverseGradient&&(l=r.stackBLPos.y,p=r.stackTLPos.y);var f=t.createLinearGradient(0,l,0,p);f.addColorStop(c,a),f.addColorStop(u,i),t.fillStyle=f,t.beginPath();var d=e(o,n.from.points),y=e(r,n.to.points);t.lineTo(d.stackTRPos.x,d.stackTRPos.y),t.lineTo(y.stackTLPos.x,y.stackTLPos.y),t.lineTo(y.stackBLPos.x,y.stackBLPos.y),t.lineTo(d.stackBRPos.x,d.stackBRPos.y),t.fill()}(r,a[t.from.stackIndex],a[t.to.stackIndex],t,s)})},n={customLinesPlugin:{enabled:!0,startColorStop:0,endColorStop:.6,startColor:"rgba(0, 0, 0, 0.55)",endColor:"rgba(0, 0, 0, 0)"}},s={};return{beforeInit:function(t){s[t.id]={readyToDrawCustomLines:!1}},afterInit:function(o){o.options.plugins=t({},n,o.options.plugins),setTimeout(function(){s[o.id].readyToDrawCustomLines=!0;o.options.plugins.customLinesPlugin.enabled&&r(o)},o.options.animation.duration)},afterDraw:function(t){t.options.plugins.customLinesPlugin.enabled&&s[t.id].readyToDrawCustomLines&&r(t)}}});
//# sourceMappingURL=chartjs-plugin-custom-lines.js.map
